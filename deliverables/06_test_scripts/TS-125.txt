TEST SCRIPT: TS-125
Test Scenario: Handle Unverified Email Login Attempt
User Story: As a System, I want to prevent unverified users from logging in, so that I can ensure email verification compliance
Priority: High
Related Requirements: FR-002

GIVEN a user has registered an account
  AND the account exists in the database
  AND the email verification status is "Unverified"
  AND the user has not clicked the verification link

WHEN the user attempts to login with:
  - Correct email address
  - Correct password

THEN the system should:
  - Validate credentials are correct
  - Check email verification status
  - Detect account is unverified
  - Deny login access
  - Display message "Please verify your email address before logging in"
  - Provide option to resend verification email

WHEN the user clicks "Resend Verification Email"

THEN the system should:
  - Send a new verification email
  - Display confirmation "Verification email sent"
  - Use unexpired verification token

WHEN the user verifies email via link

THEN the system should:
  - Update account status to "Verified"
  - Display success message
  - Allow login on next attempt
  - Redirect to login page

WHEN the user attempts login after verification

THEN the system should:
  - Validate credentials
  - Check verification status (now verified)
  - Allow login
  - Create session
  - Redirect to homepage or account dashboard

WHEN verification email is not received

THEN the user should be able to:
  - Request new verification email multiple times
  - Contact support for assistance
  - See clear instructions

WHEN verification link expires

THEN the system should:
  - Display "Link expired" message
  - Provide option to request new link
  - Generate fresh verification token

EXPECTED RESULT:
- Unverified users cannot login
- Login denial message is clear
- Option to resend verification is available
- Verification process completes successfully
- Verified users can login normally
- Email verification is enforced for security
- Users can recover from missing verification email
- Expired links are handled gracefully
- System maintains email verification compliance
