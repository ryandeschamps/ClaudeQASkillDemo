TEST SCRIPT: TS-120
Test Scenario: Calculate Order Total
User Story: As a System, I want to calculate order total including items, shipping, and tax, so that I can charge the correct amount
Priority: Critical
Related Requirements: FR-008

GIVEN a customer has items in their shopping cart
  AND shipping address is provided
  AND billing information is entered

WHEN the system calculates order total

THEN it should:
  - Sum all cart item subtotals (price Ã— quantity for each item)
  - Calculate applicable tax based on shipping address
  - Calculate shipping charges based on:
    * Shipping address/PIN code
    * Total weight or number of items
    * Shipping method selected
  - Apply any discount codes (if applicable)
  - Calculate final total

WHEN displaying the order summary

THEN the breakdown should show:
  - Items subtotal
  - Shipping charges
  - Tax amount
  - Discount amount (if applicable)
  - Order total (sum of all above)

WHEN cart items change (quantity updated or item removed)

THEN the system should:
  - Recalculate subtotal
  - Recalculate tax
  - Recalculate total
  - Update displayed amounts immediately

WHEN shipping address changes

THEN the system should:
  - Recalculate shipping charges
  - Recalculate tax (if tax rate differs)
  - Update order total

WHEN a discount code is applied

THEN the system should:
  - Validate the discount code
  - Calculate discount amount
  - Apply to appropriate items or total
  - Show original and discounted amounts
  - Recalculate final total

WHEN processing payment

THEN the charged amount should exactly match:
  - The displayed order total
  - The sum of all components
  - What customer agreed to pay

EXPECTED RESULT:
- All calculations are mathematically correct
- Subtotals sum accurately
- Tax is calculated correctly based on location
- Shipping charges are accurate
- Discounts apply correctly
- Final total is precise (no rounding errors)
- Amounts update dynamically with changes
- Customer sees accurate pricing throughout
- Payment gateway receives correct amount
- Calculations comply with tax regulations
