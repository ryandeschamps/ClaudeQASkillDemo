TEST SCRIPT: TS-122
Test Scenario: Prevent Guest Checkout
User Story: As a System, I want to require authentication before checkout, so that I can ensure order accountability
Priority: High
Related Requirements: FR-007, FR-008

GIVEN a visitor is browsing the website
  AND the visitor is not logged in
  AND products are in the shopping cart (via session/cookies)

WHEN the visitor attempts to proceed to checkout
  AND clicks "Checkout" or "Proceed to Checkout" button

THEN the system should:
  - Detect that user is not authenticated
  - Redirect to login page
  - Display message "Please login to complete your purchase"
  - Preserve cart contents for after login

WHEN redirected to login page

THEN the page should offer options to:
  - Login with existing account
  - Login with Facebook
  - Login with Google
  - Create new account

WHEN the user logs in successfully

THEN the system should:
  - Redirect back to checkout process
  - Restore cart contents
  - Allow proceeding with checkout

WHEN the user creates a new account

THEN the system should:
  - Complete registration process
  - Verify email (if required)
  - Log user in automatically
  - Redirect to checkout with cart intact

WHEN the user tries to access checkout URL directly without login

THEN the system should:
  - Block access to checkout pages
  - Redirect to login
  - Display authentication required message

WHEN cart items are saved in session

THEN after login, the cart should:
  - Contain all previously added items
  - Merge with any saved cart from logged-in account
  - Maintain quantities and selections

EXPECTED RESULT:
- Guest checkout is not permitted
- All checkout attempts require authentication
- Login requirement is clearly communicated
- Cart contents are preserved through login
- Multiple login methods are available
- User can create account during checkout flow
- Checkout is accessible only after authentication
- User experience is smooth despite login requirement
- Security: order accountability is maintained
