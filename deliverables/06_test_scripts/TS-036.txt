TEST SCRIPT: TS-036
Test Scenario: Handle Payment Failure
User Story: As a Buyer with failed payment, I want to be notified of payment failure and retry options, so that I can successfully complete my purchase
Priority: Critical
Related Requirements: FR-008

GIVEN the user is on the payment page
  AND the user has entered payment details
  AND submits payment

WHEN the payment is declined or fails due to:
  - Insufficient funds
  - Invalid card details
  - Bank declining the transaction
  - Network/gateway timeout
  - Other payment errors

THEN the system should:
  - Not create the order
  - Display a clear error message explaining the failure reason
  - Keep the cart items intact
  - Return user to payment page
  - Offer options to:
    * Retry with same payment method
    * Try a different payment method
    * Contact support

WHEN the user clicks retry

THEN the system should allow re-entering payment details
  AND attempt payment again

WHEN the user selects a different payment method

THEN the system should display that payment method's form
  AND allow completing payment with new method

EXPECTED RESULT:
- Payment failures are detected and handled gracefully
- Error messages are clear and user-friendly
- Cart items are not lost on payment failure
- User can retry payment easily
- Order is never created without successful payment
- Multiple retry attempts are allowed
- User has option to contact support if needed
- Session remains active during retry process
