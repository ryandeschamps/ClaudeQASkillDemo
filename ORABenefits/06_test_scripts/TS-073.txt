Test Script ID: TS-073
Test Scenario: Purge Staging Data
Priority: Critical
Preconditions:
- Benefits administrator role with purge privileges
- Staging data accumulated from workbook uploads and transactions
- Data retention policy defined (e.g., 6 months)
- Purge process configured and tested
- Database backup completed before purge

GIVEN: Staging tables contain data older than 6 months that needs to be purged for performance
WHEN: Benefits administrator runs purge process to remove obsolete staging data
THEN: Staging data successfully purged, database performance improved, and audit trail maintained

Test Steps:
1. Staging data accumulated from 12 months of workbook uploads
2. Data retention policy: Purge staging data older than 6 months
3. Current date: 2024-11-15
4. Purge target: Staging data before 2024-05-15 (6 months ago)
5. Benefits administrator logs into Oracle Fusion HCM
6. Navigate to "Data Management" or "System Maintenance"
7. Click "Purge Staging Data" or "Data Cleanup"
8. System displays purge parameters screen
9. Review purge options:
   - Data type: Staging data from workbook uploads
   - Age threshold: Data older than 6 months
   - Cutoff date: 2024-05-15 (calculated)
   - Include types: Benefit enrollment staging, Balance updates staging, Assignment changes staging
10. Review current staging data volumes:
    - Total staging records: 25,000
    - Records older than 6 months: 12,500
    - Records to be purged: 12,500
    - Records to be retained: 12,500
11. System displays warning:
    - "This will permanently delete 12,500 staging records"
    - "Production data will NOT be affected"
    - "Ensure database backup completed before proceeding"
12. Confirm database backup completed: ✓
13. Select purge mode: "Test Mode" to preview (first pass)
14. Click "Run Purge in Test Mode"
15. System simulates purge without deleting:
    - Records identified for purge: 12,500
    - Oldest record date: 2023-11-15 (12 months old)
    - Newest record date: 2024-05-14 (just before cutoff)
    - Estimated database space recovery: 2.5 GB
16. Review test purge results
17. Confirm test results acceptable
18. Switch to "Execute Mode"
19. Enter confirmation code to proceed with actual purge
20. Click "Execute Purge"
21. System processes purge:
    - Identifying records older than 2024-05-15
    - Deleting staging records (production data unaffected)
    - Updating database indexes
    - Optimizing database tables
22. Purge processing complete
23. Review purge results:
    - Records purged: 12,500
    - Database space recovered: 2.5 GB
    - Production records affected: 0
    - Purge duration: 15 minutes
24. Generate purge audit report:
    - Purge date: 2024-11-15
    - Cutoff date: 2024-05-15
    - Records purged: 12,500
    - Administrator: [Name]
    - Backup reference: [Backup ID]
25. Verify staging data reduced:
    - Total staging records: 12,500 (down from 25,000)
    - All remaining records newer than 2024-05-15 ✓
26. Monitor database performance improvement
27. Schedule next purge: 6 months (2025-05-15)

Expected Result:
- Purge process accessible to authorized administrators
- Purge parameters clearly configurable (date ranges, data types)
- Current data volumes displayed for review
- Test mode available to preview without executing
- Clear warning about permanent deletion
- Confirmation required before actual purge
- Purge process efficient for large data volumes (12,500 records)
- Production data completely unaffected
- Staging data older than cutoff successfully purged
- Recent staging data (< 6 months) retained
- Database space recovered and reported
- Processing time reasonable (15 minutes)
- Purge audit report comprehensive
- Database performance improved after purge
- Ability to schedule recurring purges
- Audit trail captures purge activity with details

Test Data Reference:
- Accumulated staging data from all workbook uploads
- Data older than retention period threshold
- System maintenance and performance optimization

Notes:
- Verify purge process thoroughly tested before production use
- Confirm database backup mandatory before purge
- Test that production data never affected by staging purge
- Verify purge performance acceptable for large volumes
- Ensure audit report captures all purge details
- Test purge scheduling for recurring maintenance
- Confirm database performance improvement measurable
- Verify purge process can be interrupted if needed
- Test recovery process if purge causes issues
- Ensure compliance with data retention policies
