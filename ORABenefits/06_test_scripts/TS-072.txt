Test Script ID: TS-072
Test Scenario: Fix and Reupload Failed Rows
Priority: Low
Preconditions:
- Workbook upload processed with some failed rows
- Error report downloadable with failure details
- Failed rows editable and correctable
- Reupload capability for corrected rows only
- Duplicate detection to prevent reprocessing successful rows

GIVEN: Workbook upload processed 200 rows with 5 failures
WHEN: Benefits administrator downloads error report, corrects errors, and reuploads failed rows
THEN: Failed rows successfully corrected and processed without affecting previously successful rows

Test Steps:
1. Initial workbook upload processed
2. Results: 195 rows successful, 5 rows failed
3. Benefits administrator logs into Oracle Fusion HCM
4. Navigate to upload results page
5. Review processing summary:
   - Total rows: 200
   - Successful: 195
   - Failed: 5
6. Click "Download Error Report" or "Export Failed Rows"
7. System generates error report: Failed_Rows_Report.xlsx
8. Download and open error report
9. Error report contains only failed rows with error details:
   - Row 1 (Original Row 45):
     - Person_Number: P999999
     - Error: Person number not found in system
     - Suggested fix: Verify correct person number
   - Row 2 (Original Row 78):
     - New_Benefits_Group: BG-999
     - Error: Benefits group code does not exist
     - Suggested fix: Use valid benefits group code (BG-001, BG-002, BG-003)
   - Row 3 (Original Row 112):
     - Effective_Date: 2023-01-01
     - Error: Effective date cannot be in the past
     - Suggested fix: Use current or future date
   - Row 4 (Original Row 156):
     - Current_Benefits_Group: BG-001 (actual: BG-003)
     - Error: Current benefits group mismatch
     - Suggested fix: Verify employee's actual benefits group
   - Row 5 (Original Row 189):
     - Person_Number: P100050
     - Error: Duplicate person number in file
     - Suggested fix: Remove duplicate or correct if different update
10. Correct errors in downloaded file:
    - Row 1: P999999 → P100045 (correct person number)
    - Row 2: BG-999 → BG-002 (valid benefits group)
    - Row 3: 2023-01-01 → 2025-01-01 (future date)
    - Row 4: Update current benefits group to BG-003 to match actual
    - Row 5: Remove duplicate row
11. Save corrected file: Failed_Rows_Corrected.xlsx
12. Return to workbook upload interface
13. Click "Upload Workbook"
14. Select corrected file: Failed_Rows_Corrected.xlsx
15. System detects reupload of failed rows
16. System prompts: "Reprocessing corrected rows only - successful rows will not be reprocessed"
17. Choose upload mode: "Validate and Process"
18. Click "Upload"
19. System validates corrected rows:
    - All person numbers valid: ✓
    - All benefits groups valid: ✓
    - All effective dates valid: ✓
    - No duplicates: ✓
20. Validation complete: 4 rows valid (5th removed as duplicate)
21. Click "Process Updates"
22. System processes corrected rows
23. Processing complete: 4 rows successful, 0 failures
24. Final results summary:
    - Original upload: 195 successful
    - Reupload corrections: 4 successful
    - Total successful: 199 out of 200 (one was valid duplicate)
25. All benefits group updates complete
26. Generate final processing report showing all updates

Expected Result:
- Error report easily downloadable after upload with failures
- Error report contains only failed rows (not successful rows)
- Error details clear and specific for each failure
- Suggested fixes provided for common errors
- Error report format allows direct editing and correction
- Corrected file can be reuploaded via same interface
- System recognizes reupload and processes only new rows
- Duplicate detection prevents reprocessing successful rows
- Validation of corrected rows comprehensive
- All corrected rows process successfully after fixes
- Final results show cumulative success (original + corrections)
- Processing complete without data duplication
- Final report comprehensive showing all updates
- No manual tracking needed for failed vs. successful rows

Test Data Reference:
- Any bulk upload with validation errors
- Common error scenarios:
  - Invalid person numbers
  - Invalid reference data codes
  - Date validation failures
  - Data mismatch errors
  - Duplicate records

Notes:
- Verify error report format user-friendly for corrections
- Confirm error messages clear and actionable
- Test suggested fixes accuracy and helpfulness
- Verify duplicate detection prevents double processing
- Ensure reupload process seamless
- Test multiple reupload iterations if needed
- Confirm final results accurately reflect all processing
- Verify no data corruption from failed rows
- Test that successful rows never reprocessed
- Ensure audit trail shows both original and correction uploads
